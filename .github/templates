# typed: false
# frozen_string_literal: true

# Homebrew formula for {{NAME}}
# This file is auto-generated by the release workflow.
# Template: .github/templates/formula.rb.template

class {{CLASS_NAME}} < Formula
  include Language::Python::Virtualenv

  desc "{{DESCRIPTION}}"
  homepage "{{HOMEPAGE}}"
  url "{{URL}}"
  sha256 "{{SHA256}}"
  license "MIT"
  head "{{REPOSITORY}}.git", branch: "master"

  depends_on "python@3.13"

  def install
    virtualenv_install_with_resources
  end

  test do
    # Test version command
    assert_match(/\d+\.\d+\.\d+/, shell_output("#{bin}/{{NAME}} version"))

    # Test help command shows expected subcommands
    help_output = shell_output("#{bin}/{{NAME}} --help")
    assert_match "deconstruct", help_output
    assert_match "reconstruct", help_output
  end
end
